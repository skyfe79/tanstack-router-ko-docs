# Table of Contents

- [SSR (μ„λ²„ μ‚¬μ΄λ“ λ λ”λ§)](#ssr-μ„λ²„-μ‚¬μ΄λ“-λ λ”λ§)
  - [λΉ„μ¤νΈλ¦¬λ° SSR (Non-Streaming SSR)](#λΉ„μ¤νΈλ¦¬λ°-ssr-non-streaming-ssr)
    - [λΌμ°ν„° μƒμ„±](#λΌμ°ν„°-μƒμ„±)
    - [μ„λ²„ νμ¤ν† λ¦¬](#μ„λ²„-νμ¤ν† λ¦¬)
    - [μ„λ²„μ—μ„ λΌμ°ν„°μ μ¤‘μ” λ°μ΄ν„° λ΅λ”©ν•κΈ°](#μ„λ²„μ—μ„-λΌμ°ν„°μ-μ¤‘μ”-λ°μ΄ν„°-λ΅λ”©ν•κΈ°)
  - [μλ™ λ΅λ” λ°μ΄ν„° νƒμ/μν™”](#μλ™-λ΅λ”-λ°μ΄ν„°-νƒμμν™”)
    - [μ„λ²„μ—μ„ μ• ν”λ¦¬μΌ€μ΄μ… λ λ”λ§ν•κΈ°](#μ„λ²„μ—μ„-μ• ν”λ¦¬μΌ€μ΄μ…-λ λ”λ§ν•κΈ°)
    - [404 μ—λ¬ μ²λ¦¬ν•κΈ°](#404-μ—λ¬-μ²λ¦¬ν•κΈ°)
    - [λ¨λ“  κ²ƒμ„ ν•λ° λ¨μ•„λ³΄κΈ°!](#λ¨λ“ -κ²ƒμ„-ν•λ°-λ¨μ•„λ³΄κΈ°)
  - [ν΄λΌμ΄μ–ΈνΈμ—μ„ μ• ν”λ¦¬μΌ€μ΄μ… λ λ”λ§ν•κΈ°](#ν΄λΌμ΄μ–ΈνΈμ—μ„-μ• ν”λ¦¬μΌ€μ΄μ…-λ λ”λ§ν•κΈ°)
  - [μ¤νΈλ¦¬λ° SSR](#μ¤νΈλ¦¬λ°-ssr)
  - [μ¤νΈλ¦¬λ° λ°μ΄ν„° νƒμ/μν™”(Streaming Dehydration/Hydration)](#μ¤νΈλ¦¬λ°-λ°μ΄ν„°-νƒμμν™”streaming-dehydrationhydration)
  - [λ°μ΄ν„° λ³€ν™κΈ°(Data Transformers)](#λ°μ΄ν„°-λ³€ν™κΈ°data-transformers)

# SSR (μ„λ²„ μ‚¬μ΄λ“ λ λ”λ§)

μ„λ²„ μ‚¬μ΄λ“ λ λ”λ§(SSR)μ€ μ„λ²„μ—μ„ μ»΄ν¬λ„νΈλ¥Ό λ λ”λ§ν•κ³  HTML λ§ν¬μ—…μ„ ν΄λΌμ΄μ–ΈνΈλ΅ μ „μ†΅ν•λ” κ³Όμ •μ…λ‹λ‹¤. ν΄λΌμ΄μ–ΈνΈλ” μ΄ λ§ν¬μ—…μ„ λ°›μ•„ μ™„μ „ν μƒνΈμ‘μ© κ°€λ¥ν• μ»΄ν¬λ„νΈλ΅ λ³€ν™ν•©λ‹λ‹¤.

SSRμ—λ” μΌλ°μ μΌλ΅ λ‘ κ°€μ§€ λ°©μ‹μ΄ μμµλ‹λ‹¤:

- **λ…Όμ¤νΈλ¦¬λ° SSR**
  - μ „μ²΄ νμ΄μ§€λ¥Ό μ„λ²„μ—μ„ λ λ”λ§ν•κ³ , μ• ν”λ¦¬μΌ€μ΄μ…μ΄ ν΄λΌμ΄μ–ΈνΈμ—μ„ μƒνΈμ‘μ©μ„ μ„ν•΄ ν•„μ”ν• μ§λ ¬ν™”λ λ°μ΄ν„°λ¥Ό ν¬ν•¨ν• HTMLμ„ ν• λ²μ— ν΄λΌμ΄μ–ΈνΈλ΅ μ „μ†΅ν•©λ‹λ‹¤.
  
- **μ¤νΈλ¦¬λ° SSR**
  - νμ΄μ§€μ μ¤‘μ”ν• μ²« λ²μ§Έ νμΈνΈ(First Paint)λ¥Ό μ„λ²„μ—μ„ λ λ”λ§ν•κ³ , μ• ν”λ¦¬μΌ€μ΄μ…μ΄ ν΄λΌμ΄μ–ΈνΈμ—μ„ μƒνΈμ‘μ©μ„ μ„ν•΄ ν•„μ”ν• μ§λ ¬ν™”λ λ°μ΄ν„°λ¥Ό ν¬ν•¨ν• HTMLμ„ ν• λ²μ— ν΄λΌμ΄μ–ΈνΈλ΅ μ „μ†΅ν•©λ‹λ‹¤.
  - λ‚λ¨Έμ§€ νμ΄μ§€λ” μ„λ²„μ—μ„ λ λ”λ§λλ” λ€λ΅ ν΄λΌμ΄μ–ΈνΈλ΅ μ¤νΈλ¦¬λ°λ©λ‹λ‹¤.

μ΄ κ°€μ΄λ“μ—μ„λ” TanStack Routerλ¥Ό μ‚¬μ©ν•΄ λ‘ κ°€μ§€ SSR λ°©μ‹μ„ κµ¬ν„ν•λ” λ°©λ²•μ„ μ„¤λ…ν•©λ‹λ‹¤!


## λΉ„μ¤νΈλ¦¬λ° SSR (Non-Streaming SSR)

λΉ„μ¤νΈλ¦¬λ° μ„λ²„ μ‚¬μ΄λ“ λ λ”λ§(SSR)μ€ μ„λ²„μ—μ„ μ „μ²΄ μ• ν”λ¦¬μΌ€μ΄μ… νμ΄μ§€μ λ§ν¬μ—…μ„ λ λ”λ§ν•κ³  μ™„μ„±λ HTML λ§ν¬μ—…(λ° λ°μ΄ν„°)μ„ ν΄λΌμ΄μ–ΈνΈλ΅ μ „μ†΅ν•λ” μ „ν†µμ μΈ λ°©μ‹μ…λ‹λ‹¤. ν΄λΌμ΄μ–ΈνΈλ” μ΄ λ§ν¬μ—…μ„ λ‹¤μ‹ μ™„μ „ν μƒνΈμ‘μ© κ°€λ¥ν• μ• ν”λ¦¬μΌ€μ΄μ…μΌλ΅ **ν•μ΄λ“λ μ΄μ…(hydration)**ν•©λ‹λ‹¤.

TanStack Routerλ¥Ό μ‚¬μ©ν•΄ λΉ„μ¤νΈλ¦¬λ° SSRμ„ κµ¬ν„ν•λ ¤λ©΄ λ‹¤μ μ ν‹Έλ¦¬ν‹°κ°€ ν•„μ”ν•©λ‹λ‹¤:

- `@tanstack/start/server`μ—μ„ μ κ³µν•λ” `StartServer`
  - μμ‹: `<StartServer router={router} />`
  - μ„λ²„ μ§„μ…μ μ—μ„ μ΄ μ»΄ν¬λ„νΈλ¥Ό λ λ”λ§ν•λ©΄ μ• ν”λ¦¬μΌ€μ΄μ…μ„ λ λ”λ§ν•κ³ , μ• ν”λ¦¬μΌ€μ΄μ… μμ¤€μ ν•μ΄λ“λ μ΄μ…/λ””ν•μ΄λ“λ μ΄μ…μ„ μλ™μΌλ΅ μ²λ¦¬ν•©λ‹λ‹¤. λν• `Router`μ `Wrap` μ»΄ν¬λ„νΈ μµμ…μ„ κµ¬ν„ν•©λ‹λ‹¤.
  
- `@tanstack/start`μ—μ„ μ κ³µν•λ” `StartClient`
  - μμ‹: `<StartClient router={router} />`
  - ν΄λΌμ΄μ–ΈνΈ μ§„μ…μ μ—μ„ μ΄ μ»΄ν¬λ„νΈλ¥Ό λ λ”λ§ν•λ©΄ μ• ν”λ¦¬μΌ€μ΄μ…μ„ λ λ”λ§ν•κ³ , `Router`μ `Wrap` μ»΄ν¬λ„νΈ μµμ…μ„ μλ™μΌλ΅ κµ¬ν„ν•©λ‹λ‹¤.

μ΄ λ°©μ‹μ€ μ„λ²„μ—μ„ λ¨λ“  μ‘μ—…μ„ μ™„λ£ν• ν›„ ν΄λΌμ΄μ–ΈνΈλ΅ μ „μ†΅ν•λ―€λ΅, μ΄κΈ° λ΅λ”© μ‹κ°„μ΄ κΈΈμ–΄μ§ μ μμµλ‹λ‹¤. ν•μ§€λ§ ν΄λΌμ΄μ–ΈνΈ μΈ΅μ—μ„ μ¶”κ°€μ μΈ λ λ”λ§ μ‘μ—… μ—†μ΄ λ°”λ΅ μƒνΈμ‘μ© κ°€λ¥ν• μƒνƒλ΅ μ „ν™ν•  μ μλ‹¤λ” μ¥μ μ΄ μμµλ‹λ‹¤.


### λΌμ°ν„° μƒμ„±

μ—¬λ¬λ¶„μ λΌμ°ν„°λ” μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈ μ–‘μ½μ—μ„ μ΅΄μ¬ν•  κ²ƒμ΄κΈ° λ•λ¬Έμ—, λ‘ ν™κ²½μ—μ„ μΌκ΄€λκ² λΌμ°ν„°λ¥Ό μƒμ„±ν•λ” κ²ƒμ΄ μ¤‘μ”ν•©λ‹λ‹¤. κ°€μ¥ μ‰¬μ΄ λ°©λ²•μ€ `createRouter` ν•¨μλ¥Ό κ³µμ  νμΌμ— λ…Έμ¶μ‹μΌ μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈ μ§„μ… νμΌμ—μ„ λ¨λ‘ κ°€μ Έμ™€ μ‚¬μ©ν•  μ μλ„λ΅ ν•λ” κ²ƒμ…λ‹λ‹¤.

- `src/router.tsx`

```tsx
import * as React from 'react'
import { createRouter as createTanstackRouter } from '@tanstack/react-router'
import { routeTree } from './routeTree.gen'

export function createRouter() {
  return createTanstackRouter({ routeTree })
}

declare module '@tanstack/react-router' {
  interface Register {
    router: ReturnType
  }
}
```

μ΄μ  μ΄ ν•¨μλ¥Ό μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈ μ§„μ… νμΌμ—μ„ κ°€μ Έμ™€ λΌμ°ν„°λ¥Ό μƒμ„±ν•  μ μμµλ‹λ‹¤.

- `src/entry-server.tsx`

```tsx
import { createRouter } from './router'

export async function render(req, res) {
  const router = createRouter()
}
```

- `src/entry-client.tsx`

```tsx
import { createRouter } from './router'

const router = createRouter()
```


### μ„λ²„ νμ¤ν† λ¦¬

ν΄λΌμ΄μ–ΈνΈμ—μ„λ” λΌμ°ν„°κ°€ κΈ°λ³Έμ μΌλ΅ `createBrowserHistory` μΈμ¤ν„΄μ¤λ¥Ό μ‚¬μ©ν•©λ‹λ‹¤. μ΄λ” ν΄λΌμ΄μ–ΈνΈμ—μ„ μ‚¬μ©ν•κΈ°μ— μ ν•©ν• νμ¤ν† λ¦¬ νƒ€μ…μ…λ‹λ‹¤. ν•μ§€λ§ μ„λ²„μ—μ„λ” `createMemoryHistory` μΈμ¤ν„΄μ¤λ¥Ό μ‚¬μ©ν•΄μ•Ό ν•©λ‹λ‹¤. μ™λƒν•λ©΄ `createBrowserHistory`λ” `window` κ°μ²΄λ¥Ό μ‚¬μ©ν•λ”λ°, μ΄ κ°μ²΄λ” μ„λ²„μ— μ΅΄μ¬ν•μ§€ μ•κΈ° λ•λ¬Έμ…λ‹λ‹¤.

> π§  λ©”λ¨λ¦¬ νμ¤ν† λ¦¬λ¥Ό μ΄κΈ°ν™”ν•  λ•, λ λ”λ§λλ” μ„λ²„ URLλ΅ μ„¤μ •ν•΄μ•Ό ν•©λ‹λ‹¤.

- `src/entry-server.tsx`

```tsx
const router = createRouter()

const memoryHistory = createMemoryHistory({
  initialEntries: [opts.url],
})
```

λ©”λ¨λ¦¬ νμ¤ν† λ¦¬ μΈμ¤ν„΄μ¤λ¥Ό μƒμ„±ν• ν›„, λΌμ°ν„°κ°€ μ΄λ¥Ό μ‚¬μ©ν•λ„λ΅ μ—…λ°μ΄νΈν•  μ μμµλ‹λ‹¤.

- `src/entry-server.tsx`

```tsx
router.update({
  history: memoryHistory,
})
```


### μ„λ²„μ—μ„ λΌμ°ν„°μ μ¤‘μ” λ°μ΄ν„° λ΅λ”©ν•κΈ°

μ„λ²„μ—μ„ μ• ν”λ¦¬μΌ€μ΄μ…μ„ λ λ”λ§ν•λ ¤λ©΄, λΌμ°ν„°κ°€ λΌμ°νΈ λ΅λ”λ¥Ό ν†µν•΄ ν•„μ”ν• μ¤‘μ” λ°μ΄ν„°λ¥Ό λ΅λ“ν–λ”μ§€ ν™•μΈν•΄μ•Ό ν•©λ‹λ‹¤. μ΄λ¥Ό μ„ν•΄ μ• ν”λ¦¬μΌ€μ΄μ…μ„ λ λ”λ§ν•κΈ° μ „μ— `await router.load()`λ¥Ό μ‚¬μ©ν•  μ μμµλ‹λ‹¤. μ΄ μ½”λ“λ” ν„μ¬ URLμ— λ§¤μΉ­λλ” λ¨λ“  λΌμ°νΈμ `loader` ν•¨μλ¥Ό λ³‘λ ¬λ΅ μ‹¤ν–‰ν•κ³ , κ·Έ κ²°κ³Όλ¥Ό κΈ°λ‹¤λ¦½λ‹λ‹¤.

- `src/entry-server.tsx`

```tsx
await router.load()
```


## μλ™ λ΅λ” λ°μ΄ν„° νƒμ/μν™”

TanStack Routerλ” μ—¬λ¬λ¶„μ΄ μ΄ κ°€μ΄λ“μ— μ„¤λ…λ ν‘μ¤€ SSR λ‹¨κ³„λ¥Ό μ™„λ£ν•λ” ν•, λΌμ°νΈμ—μ„ κ°€μ Έμ¨ λ΅λ” λ°μ΄ν„°λ¥Ό μλ™μΌλ΅ νƒμ λ° μν™”ν•©λ‹λ‹¤.

β οΈ μ§€μ—°λ λ°μ΄ν„° μ¤νΈλ¦¬λ°μ„ μ‚¬μ©ν•λ” κ²½μ°, μ΄ κ°€μ΄λ“μ λλ¶€λ¶„μ— μλ” [SSR μ¤νΈλ¦¬λ° λ° μ¤νΈλ¦Ό λ³€ν™](#streaming-ssr) ν¨ν„΄μ„ κµ¬ν„ν–λ”μ§€ ν™•μΈν•΄μ•Ό ν•©λ‹λ‹¤.

λ°μ΄ν„° λ΅λ”©κ³Ό λ°μ΄ν„° μ¤νΈλ¦¬λ°μ„ ν™μ©ν•λ” λ°©λ²•μ— λ€ν• μμ„Έν• λ‚΄μ©μ€ [λ°μ΄ν„° λ΅λ”©](./data-loading.md) λ° [λ°μ΄ν„° μ¤νΈλ¦¬λ°](../data-streaming) κ°€μ΄λ“λ¥Ό μ°Έκ³ ν•μ„Έμ”.


### μ„λ²„μ—μ„ μ• ν”λ¦¬μΌ€μ΄μ… λ λ”λ§ν•κΈ°

ν„μ¬ URLμ— λ€ν• λ¨λ“  μ¤‘μ”ν• λ°μ΄ν„°λ¥Ό λ΅λ“ν• λΌμ°ν„° μΈμ¤ν„΄μ¤λ¥Ό κ°€μ§€κ³  μλ‹¤λ©΄, μ„λ²„μ—μ„ μ• ν”λ¦¬μΌ€μ΄μ…μ„ λ λ”λ§ν•  μ μμµλ‹λ‹¤:

```tsx
// src/entry-server.tsx

const html = ReactDOMServer.renderToString()
```

μ΄ μ½”λ“λ” React μ• ν”λ¦¬μΌ€μ΄μ…μ„ μ„λ²„μ—μ„ λ¬Έμμ—΄ ν•νƒλ΅ λ λ”λ§ν•λ” κΈ°λ³Έμ μΈ μμ μ…λ‹λ‹¤. `ReactDOMServer.renderToString()` ν•¨μλ” React μ»΄ν¬λ„νΈλ¥Ό HTML λ¬Έμμ—΄λ΅ λ³€ν™ν•μ—¬ μ„λ²„ μ‚¬μ΄λ“ λ λ”λ§(SSR)μ„ κ°€λ¥ν•κ² ν•©λ‹λ‹¤. μ΄λ ‡κ² μƒμ„±λ HTMLμ€ ν΄λΌμ΄μ–ΈνΈλ΅ μ „μ†΅λμ–΄ μ΄κΈ° νμ΄μ§€ λ΅λ”© μ†λ„λ¥Ό ν–¥μƒμ‹ν‚¬ μ μμµλ‹λ‹¤.


### 404 μ—λ¬ μ²λ¦¬ν•κΈ°

`router`λ” λ λ”λ§ κ³Όμ •μ—μ„ 404 μ—λ¬κ°€ λ°μƒν–λ”μ§€ ν™•μΈν•  μ μλ” `hasNotFoundMatch` λ©”μ„λ“λ¥Ό μ κ³µν•©λ‹λ‹¤. μ΄ λ©”μ„λ“λ¥Ό μ‚¬μ©ν•΄ 404 μ—λ¬κ°€ λ°μƒν–λ”μ§€ ν™•μΈν•κ³ , κ·Έμ— λ”°λΌ μ‘λ‹µ μƒνƒ μ½”λ“λ¥Ό μ„¤μ •ν•  μ μμµλ‹λ‹¤:

```tsx
// src/entry-server.tsx
if (router.hasNotFoundMatch()) statusCode = 404
```


### λ¨λ“  κ²ƒμ„ ν•λ° λ¨μ•„λ³΄κΈ°!

μ§€κΈκΉμ§€ μ„¤λ…ν• κ°λ…λ“¤μ„ λ¨λ‘ ν™μ©ν• μ„λ²„ μ§„μ… νμΌμ μ™„μ „ν• μμ λ¥Ό μ‚΄ν΄λ³΄κ² μµλ‹λ‹¤.

```tsx
// src/entry-server.tsx
import * as React from 'react'
import ReactDOMServer from 'react-dom/server'
import { createMemoryHistory } from '@tanstack/react-router'
import { StartServer } from '@tanstack/start/server'
import { createRouter } from './router'

export async function render(url, response) {
  const router = createRouter()

  const memoryHistory = createMemoryHistory({
    initialEntries: [url],
  })

  router.update({
    history: memoryHistory,
  })

  await router.load()

  const appHtml = ReactDOMServer.renderToString()

  response.statusCode = router.hasNotFoundMatch() ? 404 : 200
  response.setHeader('Content-Type', 'text/html')
  response.end(`${appHtml}`)
}
```

μ΄ μ½”λ“λ” μ„λ²„ μΈ΅μ—μ„ λΌμ°ν„°λ¥Ό μ΄κΈ°ν™”ν•κ³ , μ£Όμ–΄μ§„ URLμ— λ”°λΌ λ©”λ¨λ¦¬ νμ¤ν† λ¦¬λ¥Ό μƒμ„±ν• ν›„, λΌμ°ν„°λ¥Ό μ—…λ°μ΄νΈν•κ³ , ν•„μ”ν• λ°μ΄ν„°λ¥Ό λ΅λ“ν• λ’¤, React μ•±μ„ HTML λ¬Έμμ—΄λ΅ λ λ”λ§ν•©λ‹λ‹¤. λ§μ§€λ§‰μΌλ΅, μ‘λ‹µ μƒνƒ μ½”λ“μ™€ μ½ν…μΈ  νƒ€μ…μ„ μ„¤μ •ν•κ³ , λ λ”λ§λ HTMLμ„ ν΄λΌμ΄μ–ΈνΈμ—κ² μ „μ†΅ν•©λ‹λ‹¤.


## ν΄λΌμ΄μ–ΈνΈμ—μ„ μ• ν”λ¦¬μΌ€μ΄μ… λ λ”λ§ν•κΈ°

ν΄λΌμ΄μ–ΈνΈ μΈ΅μ—μ„λ” ν›¨μ”¬ κ°„λ‹¨ν•©λ‹λ‹¤.

1. λΌμ°ν„° μΈμ¤ν„΄μ¤λ¥Ό μƒμ„±ν•©λ‹λ‹¤.
2. `<StartClient />` μ»΄ν¬λ„νΈλ¥Ό μ‚¬μ©ν•΄ μ• ν”λ¦¬μΌ€μ΄μ…μ„ λ λ”λ§ν•©λ‹λ‹¤.

```tsx
// src/entry-client.tsx

import * as React from 'react'
import ReactDOM from 'react-dom/client'

import { StartClient } from '@tanstack/start'
import { createRouter } from './router'

const router = createRouter()

ReactDOM.hydrateRoot(document, )
```

μ΄ μ„¤μ •μ„ ν†µν•΄ μ• ν”λ¦¬μΌ€μ΄μ…μ€ μ„λ²„μ—μ„ λ λ”λ§λ ν›„ ν΄λΌμ΄μ–ΈνΈμ—μ„ ν•μ΄λ“λ μ΄μ…λ©λ‹λ‹¤!


## μ¤νΈλ¦¬λ° SSR

μ¤νΈλ¦¬λ° SSRμ€ κ°€μ¥ μµμ‹  ν•νƒμ SSR(μ„λ²„ μ‚¬μ΄λ“ λ λ”λ§)λ΅, μ„λ²„μ—μ„ λ λ”λ§λ HTML λ§ν¬μ—…μ„ ν΄λΌμ΄μ–ΈνΈμ—κ² μ§€μ†μ μ΄κ³  μ μ§„μ μΌλ΅ μ „μ†΅ν•λ” κ³Όμ •μ…λ‹λ‹¤. μ΄λ” κΈ°μ΅΄μ SSRκ³Ό κ°λ…μ μΌλ΅ μ•½κ°„ λ‹¤λ¦…λ‹λ‹¤. μ¤νΈλ¦¬λ° SSRμ€ μ΄κΈ° λ λ”λ§ μ‹ μ¤‘μ”ν• μ²« λ²μ§Έ νμΈνΈλ¥Ό μ„ν• λ§ν¬μ—…κ³Ό λ°μ΄ν„°λ¥Ό ν΄λΌμ΄μ–ΈνΈμ—κ² μ „μ†΅ν• ν›„, μ°μ„ μμ„κ°€ λ‚®κ±°λ‚ μ‘λ‹µ μ‹κ°„μ΄ λ” μ¤λ κ±Έλ¦¬λ” λ§ν¬μ—…κ³Ό λ°μ΄ν„°λ¥Ό λ™μΌν• μ”μ²­ λ‚΄μ—μ„ ν΄λΌμ΄μ–ΈνΈμ—κ² μ¤νΈλ¦¬λ°ν•  μ μμµλ‹λ‹¤.

μ΄ ν¨ν„΄μ€ λ°μ΄ν„°λ¥Ό κ°€μ Έμ¤λ” λ° μ‹κ°„μ΄ μ¤λ κ±Έλ¦¬κ±°λ‚ λ†’μ€ μ§€μ—° μ‹κ°„μ΄ ν•„μ”ν• νμ΄μ§€μ— μ μ©ν•©λ‹λ‹¤. μλ¥Ό λ“¤μ–΄, μ„λ“νν‹° APIμ—μ„ λ°μ΄ν„°λ¥Ό κ°€μ Έμ™€μ•Ό ν•λ” νμ΄μ§€κ°€ μλ‹¤λ©΄, μ¤‘μ”ν• μ΄κΈ° λ§ν¬μ—…κ³Ό λ°μ΄ν„°λ¥Ό λ¨Όμ € ν΄λΌμ΄μ–ΈνΈμ—κ² μ „μ†΅ν• ν›„, λ μ¤‘μ”ν• μ„λ“νν‹° λ°μ΄ν„°λ¥Ό ν•΄κ²°λλ” λ€λ΅ μ¤νΈλ¦¬λ°ν•  μ μμµλ‹λ‹¤.

**μ΄ μ¤νΈλ¦¬λ° ν¨ν„΄μ€ `renderToPipeableStream`μ„ μ‚¬μ©ν•λ” ν• μλ™μΌλ΅ λ™μ‘ν•©λ‹λ‹¤.**


## μ¤νΈλ¦¬λ° λ°μ΄ν„° νƒμ/μν™”(Streaming Dehydration/Hydration)

μ¤νΈλ¦¬λ° λ°μ΄ν„° νƒμ/μν™”λ” λ§ν¬μ—…μ„ λ„μ–΄μ„λ” κ³ κΈ‰ ν¨ν„΄μ…λ‹λ‹¤. μ„λ²„μ—μ„ ν΄λΌμ΄μ–ΈνΈλ΅ μ§€μ› λ°μ΄ν„°λ¥Ό νƒμ(Dehydration)ν•κ³  μ¤νΈλ¦¬λ°ν• λ’¤, λ„μ°© μ‹ λ‹¤μ‹ μν™”(Hydration)ν•  μ μμµλ‹λ‹¤. μ΄ ν¨ν„΄μ€ μ„λ²„μ—μ„ μ΄κΈ° λ§ν¬μ—…μ„ λ λ”λ§ν•λ” λ° μ‚¬μ©λ κΈ°λ³Έ λ°μ΄ν„°λ¥Ό μ¶”κ°€λ΅ ν™μ©ν•κ±°λ‚ κ΄€λ¦¬ν•΄μ•Ό ν•λ” μ• ν”λ¦¬μΌ€μ΄μ…μ— μ μ©ν•©λ‹λ‹¤.


## λ°μ΄ν„° λ³€ν™κΈ°(Data Transformers)

SSR(Server Side Rendering)μ„ μ‚¬μ©ν•  λ•, μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈ κ°„μ— μ „λ‹¬λλ” λ°μ΄ν„°λ” λ„¤νΈμ›ν¬ κ²½κ³„λ¥Ό λ„κΈ° μ „μ— μ§λ ¬ν™”(serialize)λμ–΄μ•Ό ν•©λ‹λ‹¤. κΈ°λ³Έμ μΌλ΅ TanStack Routerλ” `JSON.stringify`μ™€ `JSON.parse`λ¥Ό λ„μ–΄ λ‡ κ°€μ§€ κΈ°λ³Έ νƒ€μ…μ„ μ§€μ›ν•λ” λ§¤μ° κ°€λ²Όμ΄ μ§λ ¬ν™”κΈ°λ¥Ό μ‚¬μ©ν•©λ‹λ‹¤.

κΈ°λ³Έμ μΌλ΅ λ‹¤μ νƒ€μ…λ“¤μ΄ μ§€μ›λ©λ‹λ‹¤:

- `Date`
- `undefined`

λ§μ•½ κΈ°λ³Έμ μΌλ΅ μ§€μ›λμ–΄μ•Ό ν•  λ‹¤λ¥Έ νƒ€μ…μ΄ μλ‹¤κ³  μƒκ°λλ©΄, TanStack Router μ €μ¥μ†μ— μ΄μλ¥Ό μ—΄μ–΄μ£Όμ„Έμ”.

`Map`, `Set`, `BigInt` λ“±κ³Ό κ°™μ€ λ” λ³µμ΅ν• λ°μ΄ν„° νƒ€μ…μ„ μ‚¬μ©ν•λ‹¤λ©΄, νƒ€μ… μ •μκ°€ μ •ν™•ν•κ³  λ°μ΄ν„°κ°€ μ¬λ°”λ¥΄κ² μ§λ ¬ν™” λ° μ—­μ§λ ¬ν™”λλ„λ΅ μ»¤μ¤ν…€ μ§λ ¬ν™”κΈ°λ¥Ό μ‚¬μ©ν•΄μ•Ό ν•  μ μμµλ‹λ‹¤. μ΄λ• `createRouter`μ `transformer` μµμ…μ΄ μ μ©ν•©λ‹λ‹¤.

λ°μ΄ν„° λ³€ν™κΈ° APIλ” λ„¤νΈμ›ν¬λ¥Ό ν†µν•΄ ν†µμ‹ ν•  λ• μ΄λ¬ν• λ°μ΄ν„° νƒ€μ…μ„ ν¬λ…ν•κ² μ‚¬μ©ν•  μ μλ„λ΅ μ»¤μ¤ν…€ μ§λ ¬ν™”κΈ°λ¥Ό μ‚¬μ©ν•  μ μκ² ν•΄μ¤λ‹λ‹¤.

λ‹¤μ μμ λ” [SuperJSON](https://github.com/blitz-js/superjson)μ„ μ‚¬μ©ν•λ” λ°©λ²•μ„ λ³΄μ—¬μ¤λ‹λ‹¤. ν•μ§€λ§ [`Router Transformer`](../api/router/RouterOptionsType.md#transformer-property)λ¥Ό κµ¬ν„ν• μ–΄λ–¤ κ²ƒμ΄λ“  μ‚¬μ©ν•  μ μμµλ‹λ‹¤.

```tsx
import { SuperJSON } from 'superjson'

const router = createRouter({
  transformer: SuperJSON,
})
```

μ΄λ ‡κ² ν•λ©΄ TanStack Routerλ” μ΄μ  λ„¤νΈμ›ν¬λ¥Ό ν†µν•΄ λ°μ΄ν„°λ¥Ό μ§λ ¬ν™”ν•  λ• SuperJSONμ„ μ μ ν μ‚¬μ©ν•κ² λ©λ‹λ‹¤.


