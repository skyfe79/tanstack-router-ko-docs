# 개요

**TanStack Router는 React 애플리케이션을 구축하기 위한 라우터**입니다. 주요 기능은 다음과 같습니다:

- 100% 추론된 TypeScript 지원
- 타입 안전한 네비게이션
- 중첩 라우팅과 레이아웃 라우트
- SWR 캐싱이 포함된 내장 라우트 로더
- 클라이언트 측 데이터 캐시(TanStack Query, SWR 등)를 위해 설계
- 자동 라우트 미리 가져오기
- 비동기 라우트 엘리먼트와 에러 바운더리
- 파일 기반 라우트 생성
- 타입 안전한 JSON 우선 검색 파라미터 상태 관리 API
- 경로 및 검색 파라미터 스키마 검증
- 검색 파라미터 네비게이션 API
- 커스텀 검색 파라미터 파서/직렬화 지원
- 검색 파라미터 미들웨어
- 라우트 매칭/로딩 미들웨어

빠르게 시작하려면 다음 페이지로 이동하세요. 더 자세한 설명을 원한다면, 준비하시고 함께 알아봅시다!


## "라우팅의 갈림길"

애플리케이션을 구축할 때 라우터를 사용하는 것은 필수로 여겨지며, 보통 기술 스택을 선택할 때 가장 먼저 고려하는 요소 중 하나입니다.

**그렇다면, 왜 다른 라우터 대신 TanStack Router를 선택해야 할까요?**

이 질문에 답하기 위해서는 현재 시장에 있는 다른 옵션들을 살펴볼 필요가 있습니다. 충분히 찾아보면 많은 라우터가 있지만, 제 경험상 진지하게 고려할 만한 것은 몇 가지뿐입니다:

- **Next.js** - 새로운 React 프로젝트를 시작할 때 사실상의 표준 프레임워크로 여겨집니다. 성능, 워크플로우, 그리고 최신 기술에 집중하고 있습니다. 그 API와 추상화는 강력하지만, 때로는 비표준적으로 느껴질 수 있습니다. 업계에서의 빠른 성장과 채택으로 인해 기능이 풍부하지만, 때로는 압도적이거나 불필요하게 복잡해 보일 수 있습니다.
- **Remix / React Router** - 역사적으로 성공적인 React Router를 기반으로 한 풀스택 프레임워크로, 개발자와 사용자 경험이 매우 강력합니다. Request/Response와 같은 웹 표준에 기반한 API와 비전을 가지고 있으며, JS가 실행될 수 있는 어디서든 동작할 수 있도록 설계되었습니다. 많은 API와 추상화가 훌륭하게 설계되었으며, TanStack Router의 여러 API에 영감을 주기도 했습니다. 하지만, 엄격한 설계, 부가적인 타입 안전성, 그리고 때로는 플랫폼 API에 지나치게 엄격하게 의존하는 점 때문에 일부 개발자들은 더 많은 것을 원할 수 있습니다.

이 두 프레임워크(와 그들의 라우터)는 훌륭하며, 제 개인적으로도 React 애플리케이션을 구축하는 데 매우 좋은 솔루션임을 증명할 수 있습니다. 하지만 제 경험상, 특히 개발자들이 애플리케이션을 더 빠르고 쉽게, 그리고 즐겁게 작업할 수 있도록 제공되는 실제 라우팅 API 측면에서 이 솔루션들은 더 나아질 여지가 있습니다.

이 시점에서 라우터를 선택하는 것이 프레임워크 선택과 1대1로 연결되는 중요한 결정이라는 것은 놀라운 일이 아닐 것입니다. 대부분의 프레임워크가 특정 라우터에 의존하기 때문입니다.

**그렇다면 TanStack Router가 프레임워크인가요?**

TanStack Router 자체는 전통적인 의미의 "프레임워크"는 아닙니다. 몇 가지 일반적인 풀스택 문제를 다루지 않기 때문입니다. 하지만 TanStack Router는 번들링, 배포, 서버 측 특정 기능을 다루는 다른 도구들과 함께 사용할 때 풀스택 프레임워크로 업그레이드될 수 있도록 설계되었습니다. 이것이 바로 우리가 현재 [TanStack Start](https://tanstack.com/start)를 개발 중인 이유입니다. TanStack Start는 TanStack Router와 Vinxi, Nitro, Vite와 같은 도구들을 기반으로 구축된 풀스택 프레임워크입니다.

TanStack Router의 역사에 대해 더 깊이 알고 싶다면, [TanStack Router의 역사](./decisions-on-dx.md#tanstack-routers-origin-story)를 읽어보세요.


## 왜 TanStack Router를 사용해야 할까요?

TanStack Router는 여러분이 기대하는 다른 라우터들과 동일한 기본 기능을 제공합니다:

- 중첩 라우트, 레이아웃 라우트, 그룹화된 라우트
- 파일 기반 라우팅
- 병렬 데이터 로딩
- 미리 가져오기(prefetching)
- URL 경로 파라미터
- 에러 바운더리와 에러 처리
- SSR(서버 사이드 렌더링)
- 라우트 마스킹

또한, TanStack Router는 기존의 기준을 높이는 새로운 기능들도 제공합니다:

- 100% 추론된 TypeScript 지원
- 타입 안전한 네비게이션
- 로더를 위한 내장 SWR 캐싱
- 클라이언트 측 데이터 캐시(TanStack Query, SWR 등)를 위해 설계됨
- 타입 안전한 JSON 우선 검색 파라미터 상태 관리 API
- 경로 및 검색 파라미터 스키마 검증
- 검색 파라미터 네비게이션 API
- 커스텀 검색 파라미터 파서/직렬화 지원
- 검색 파라미터 미들웨어
- 상속된 라우트 컨텍스트
- 파일 기반과 코드 기반 라우팅의 혼합

이제 몇 가지 중요한 기능들을 더 자세히 살펴보겠습니다!


## 100% 타입 추론을 지원하는 TypeScript

요즘은 모든 것이 "TypeScript로 작성"되거나 최소한 런타임 기능 위에 타입 정의를 얹어 제공합니다. 하지만 실제로 TypeScript를 염두에 두고 API를 설계한 패키지는 생태계에서 찾아보기 어렵습니다. 여러분의 라우터가 옵션 필드를 자동 완성하고 여기저기서 속성/메서드 오타를 잡아준다는 점은 기쁘지만, 이보다 더 많은 것을 얻을 수 있습니다.

- **TanStack Router**는 코드 어디에서든 모든 라우트와 그 설정을 완벽히 인지합니다. 여기에는 경로, 경로 매개변수, 검색 매개변수, 컨텍스트, 그리고 여러분이 제공한 기타 설정이 포함됩니다. 이는 결국 앱 내 어떤 라우트로도 100% 타입 안전성을 보장하며, 링크나 네비게이션 호출이 성공할 것이라는 확신을 갖고 이동할 수 있음을 의미합니다.
- **TanStack Router**는 손실 없는 타입 추론을 제공합니다. 수많은 제네릭 타입 매개변수를 사용하여 여러분이 제공한 모든 타입 정보를 API 전반과 앱 전체에 걸쳐 강제하고 전파합니다. 이 정도의 타입 안전성과 개발자 확신을 제공하는 다른 라우터는 없습니다.

이 모든 것이 여러분에게 어떤 의미가 있을까요?

- 자동 완성과 타입 힌트를 통한 더 빠른 기능 개발
- 더 안전하고 빠른 리팩토링
- 코드가 예상대로 동작할 것이라는 확신

```typescript
// 예제: TanStack Router를 사용한 타입 안전한 네비게이션
import { createRouter, navigate } from '@tanstack/router';

const router = createRouter({
  routes: [
    {
      path: '/user/:userId',
      component: UserPage,
    },
  ],
});

// 타입 안전한 네비게이션
navigate({ to: '/user/123' }); // ✅ 올바른 경로
navigate({ to: '/user/abc' }); // ❌ 타입 오류: userId는 숫자여야 함
```

TanStack Router는 여러분의 개발 경험을 한층 더 향상시켜 줍니다. 타입 안전성과 개발자 친화적인 기능을 통해 더 나은 코드를 작성할 수 있도록 도와줍니다.


## 퍼스트클래스 검색 파라미터

검색 파라미터는 종종 뒷전으로 밀려나며, 단순히 파싱하고 업데이트할 수 있는 문자열(또는 문자열)의 블랙박스처럼 취급됩니다. 기존 솔루션들은 타입 안전성을 제공하지 않아, 이를 다룰 때 더 많은 주의가 필요합니다. 가장 "모던"한 프레임워크와 라우터조차도 이 상태를 어떻게 관리할지 여러분에게 맡기는 경우가 많습니다. 가끔은 검색 문자열을 객체로 파싱해주기도 하지만, 대부분은 `URLSearchParams`를 사용해 직접 처리해야 합니다.

잠시 돌아가서 생각해보면, **검색 파라미터는 애플리케이션 전체에서 가장 강력한 상태 관리자**입니다. 검색 파라미터는 전역적이며, 직렬화 가능하고, 북마크 가능하며, 공유 가능하기 때문에 페이지 새로고침이나 소셜 공유 후에도 유지되어야 하는 모든 종류의 상태를 저장하기에 완벽한 장소입니다.

이러한 책임을 다하기 위해, TanStack Router에서는 검색 파라미터를 퍼스트클래스 시민으로 대우합니다. 여전히 표준 `URLSearchParams`를 기반으로 하지만, TanStack Router는 강력한 파서/직렬화기를 사용해 검색 파라미터에서 더 깊고 복잡한 데이터 구조를 관리합니다. 이 모든 것이 타입 안전성을 유지하면서도 쉽게 작업할 수 있도록 설계되었습니다.

**URL 안에 `useState`가 있는 것과 같습니다!**

검색 파라미터는 다음과 같은 특징을 가집니다:

- 자동으로 JSON으로 파싱 및 직렬화
- 검증 및 타입 지정
- 부모 라우트로부터 상속
- 로더, 컴포넌트, 훅에서 접근 가능
- `useSearch` 훅, `Link`, `navigate`, `router.navigate` API를 통해 쉽게 수정 가능
- 커스텀 검색 필터와 미들웨어로 커스터마이징 가능
- 효율적인 리렌더링을 위한 세분화된 검색 파라미터 선택자로 구독 가능

TanStack Router의 검색 파라미터를 사용해보면, 이전에 어떻게 이 기능 없이 살아왔는지 의아해질 것입니다.


## 내장형 캐싱과 사용자 친화적인 데이터 로딩

데이터 로딩은 모든 애플리케이션에서 중요한 부분입니다. 대부분의 기존 라우터가 중요한 데이터 로딩 API를 제공하지만, 캐싱과 데이터 생명주기 관리 측면에서는 부족한 경우가 많습니다. 기존 솔루션들은 몇 가지 공통적인 문제를 가지고 있습니다:

- **캐싱이 전혀 없음**: 데이터는 항상 최신 상태이지만, 사용자들은 자주 접근하는 데이터를 반복적으로 로딩하기 위해 기다려야 합니다.
- **과도하게 공격적인 캐싱**: 데이터가 너무 오래 캐싱되어 오래된 데이터가 남아 사용자 경험이 나빠질 수 있습니다.
- **단순한 무효화 전략과 API**: 데이터가 너무 자주 무효화되어 불필요한 네트워크 요청과 리소스 낭비가 발생하거나, 데이터가 무효화되는 시점을 세밀하게 제어할 수 없는 경우가 있습니다.

TanStack Router는 캐싱과 데이터 로딩에 대해 두 가지 접근 방식을 통해 이러한 문제를 해결합니다:


### 내장 캐시

TanStack Router는 라우터와 원활하게 작동하는 가벼운 내장 캐시 레이어를 제공합니다. 이 캐시 레이어는 TanStack Query를 기반으로 하지만 기능이 적고 API 표면적이 훨씬 작습니다. TanStack Query와 마찬가지로, 합리적이면서도 강력한 기본값 덕분에 여러분의 데이터는 재사용을 위해 캐시되고, 필요할 때 무효화되며, 사용되지 않을 때는 가비지 컬렉션됩니다. 또한 필요할 때 수동으로 캐시를 무효화할 수 있는 간단한 API도 제공합니다.


### 유연하고 강력한 데이터 생명주기 API

TanStack Router는 유연하고 강력한 데이터 로딩 API를 제공합니다. 이를 통해 TanStack Query, SWR, Apollo, Relay와 같은 기존 데이터 패칭 라이브러리나 여러분이 직접 만든 커스텀 데이터 패칭 솔루션과 쉽게 통합할 수 있습니다. `context`, `beforeLoad`, `loaderDeps`, `loader`와 같은 설정 가능한 API들은 서로 조화를 이루며, 선언적인 데이터 의존성을 정의하고 데이터를 미리 가져오며, 외부 데이터 소스의 생명주기를 쉽게 관리할 수 있게 해줍니다.


## 상속 가능한 라우트 컨텍스트

TanStack Router의 라우터와 라우트 컨텍스트는 강력한 기능을 제공합니다. 이 기능을 통해 특정 라우트에 대한 컨텍스트를 정의할 수 있으며, 이 컨텍스트는 모든 하위 라우트에 상속됩니다. 심지어 라우터와 루트 라우트 자체도 컨텍스트를 제공할 수 있습니다. 컨텍스트는 동기적으로 또는 비동기적으로 구성할 수 있으며, 라우트와 라우트 설정 간에 데이터, 설정, 심지어 함수를 공유하는 데 사용됩니다. 이 기능은 다음과 같은 시나리오에서 특히 유용합니다:

- **인증 및 권한 부여**
- **하이브리드 SSR/CSR 데이터 가져오기 및 미리 로딩**
- **테마 설정**
- **싱글톤 및 전역 유틸리티**
- **미리 로딩, 로딩, 렌더링 단계에 걸친 커링 또는 부분 적용**

또한, 타입 안전성이 없는 라우트 컨텍스트는 무슨 의미가 있을까요? TanStack Router의 라우트 컨텍스트는 완전히 타입 안전하며, 추가 비용 없이 타입 추론이 가능합니다.


## 파일 기반 및 코드 기반 라우팅

TanStack Router는 파일 기반과 코드 기반 라우팅을 동시에 지원합니다. 이 유연성 덕분에 여러분은 프로젝트에 가장 적합한 방식을 선택할 수 있습니다.

TanStack Router의 파일 기반 라우팅 방식은 사용자 중심으로 설계되었습니다. 라우트 설정은 Vite 플러그인이나 TanStack Router CLI를 통해 자동으로 생성되며, 생성된 코드를 어떻게 사용할지는 여러분의 선택에 달려 있습니다. 이는 파일 기반 라우팅을 사용하더라도 항상 라우트와 라우터를 완전히 제어할 수 있음을 의미합니다.


## 감사의 말

TanStack Router는 다음과 같은 여러 오픈소스 프로젝트에서 유명해진 개념과 패턴을 기반으로 만들어졌습니다:

- [TRPC](https://trpc.io/)
- [Remix](https://remix.run)
- [Chicane](https://swan-io.github.io/chicane/)
- [Next.js](https://nextjs.org)

이 프로젝트들의 개발에 투자된 노력, 위험, 그리고 연구를 인정하며, 그들이 세운 기준을 더 높이 끌어올리기 위해 기쁘게 노력하고 있습니다.


## 시작해 봅시다!

이제 기본적인 내용은 충분히 살펴봤으니, TanStack Router로 할 수 있는 더 많은 것들을 알아보겠습니다. 다음 버튼을 눌러 시작해 보세요!


